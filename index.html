<!DOCTYPE html>
<html>

<head>
    <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@v0.182.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@v0.182.0/examples/jsm/"
      }
    }
    </script>
</head>

<body style="margin:0; overflow: hidden">
    <script type="module">
        import * as THREE from 'three'

        const renderer = new THREE.WebGLRenderer()
        renderer.setSize(window.innerWidth, window.innerHeight)
        document.body.appendChild(renderer.domElement)

        const scene = new THREE.Scene()

        const camera = new THREE.PerspectiveCamera(120, window.innerWidth / window.innerHeight, 0.1, 100)
        camera.position.set(-1, -1, -1)
        camera.lookAt(0, 0, 0)

        const axes = new THREE.AxesHelper(1000)
        scene.add(axes)

        // const loader = new THREE.TextureLoader()
        // loader.load(
        //     'equi.png',
        //     (tex) => {
        //         tex.mapping = THREE.EquirectangularReflectionMapping
        //         scene.background = tex
        //         animate()
        //     }
        // )

        const loader = new THREE.CubeTextureLoader()
        loader.load(
            ['px.png', 'nx.png', 'py.png', 'ny.png', 'pz.png', 'nz.png'],
            (tex) => {
                scene.background = tex
                animate()
            }
        );

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight
            camera.updateProjectionMatrix()
            renderer.setSize(window.innerWidth, window.innerHeight)
        })

        let keyDown = {}
        window.keyDown = keyDown
        window.addEventListener('keydown', e => keyDown[e.key] = true);
        window.addEventListener('keyup', e => keyDown[e.key] = false);

        function animate() {
            requestAnimationFrame(animate)
            axes.rotation.x += (!!keyDown["x"] - !!keyDown["X"]) * 0.02
            axes.rotation.y += (!!keyDown["y"] - !!keyDown["Y"]) * 0.02
            axes.rotation.z += (!!keyDown["z"] - !!keyDown["Z"]) * 0.02

            if (keyDown["r"]) { axes.rotation.set(0, 0, 0) }

            scene.backgroundRotation.copy(axes.rotation)
            renderer.render(scene, camera)
        }
    </script>
</body>

</html>